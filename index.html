<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>STEPS Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css"/>
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>STEPS Decision Aid Tool</h1>
    </header>

    <div class="tabs">
      <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
      <button class="tablink" onclick="openTab('instructionsTab', this)">Instructions</button>
      <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
      <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
      <button class="tablink" onclick="openTab('uptakeTab', this)">Predicted Uptake</button>
      <button class="tablink" onclick="openTab('wtpTab', this)">Willingness to Pay</button>
      <button class="tablink" onclick="openTab('cbaTab', this)">Costs & Benefits</button>
      <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
    </div>

    <!-- Introduction Tab -->
    <div id="introTab" class="tabcontent" style="display: block;">
      <div class="intro-box">
        <p>
          Scaling Field Epidemiology Training Programs (FETP) in India is crucial for enhancing public health surveillance, outbreak response, and data-driven decision-making. This tool uses estimates based on an error component logit model to predict program uptake probabilities and conduct cost-benefit analyses, allowing informed decisions on program scaling based on key attributes.
        </p>
        <p>Use the tabs above to navigate:</p>
        <ul>
          <li><strong>Instructions</strong> – Guidance for each tool feature.</li>
          <li><strong>Attributes</strong> – Detailed descriptions of the tool attributes.</li>
          <li><strong>Inputs</strong> – Configure your training scenario’s parameters.</li>
          <li><strong>Predicted Uptake</strong> – View charts predicting training uptake.</li>
          <li><strong>Willingness to Pay</strong> – Analyze the monetary value of each attribute.</li>
          <li><strong>Costs & Benefits</strong> – Analyze financial implications using realistic cost and benefit data.</li>
          <li><strong>Scenarios</strong> – Save, compare, or export multiple configurations.</li>
        </ul>
      </div>
    </div>

    <!-- Instructions Tab -->
    <div id="instructionsTab" class="tabcontent">
      <h2>How to Use This Tool</h2>
      <ol>
        <li>Review the <strong>Attributes</strong> tab to understand key factors influencing training program scaling.</li>
        <li>Go to the <strong>Inputs</strong> tab to configure your training scenario by selecting various attribute levels and adjusting the sliders.</li>
        <li>Click “Calculate &amp; View Results” to generate predicted uptake and a cost-benefit analysis.</li>
        <li>Visit the <strong>Predicted Uptake</strong> tab to see the updated chart.</li>
        <li>Check the <strong>Willingness to Pay</strong> tab for attribute-specific valuations.</li>
        <li>Use the <strong>Costs &amp; Benefits</strong> tab for a detailed financial breakdown.</li>
        <li>Go to the <strong>Scenarios</strong> tab to save configurations, compare them, or export results to PDF.</li>
      </ol>
    </div>

    <!-- Attributes Tab -->
    <div id="attributesTab" class="tabcontent">
      <h2>Tool Attributes</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Levels</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Training Level</td>
            <td>Frontline, Intermediate, Advanced</td>
            <td>Complexity and depth of the training program.</td>
          </tr>
          <tr>
            <td>Delivery Method</td>
            <td>In-Person, Online, Hybrid</td>
            <td>Mode of instruction delivery.</td>
          </tr>
          <tr>
            <td>Accreditation</td>
            <td>National, International, None</td>
            <td>Formal recognition of the training program.</td>
          </tr>
          <tr>
            <td>Location of Training</td>
            <td>District-Level, State-Level, Regional Centers</td>
            <td>Geographical setting for the training.</td>
          </tr>
          <tr>
            <td>Cohort Size</td>
            <td>Small (500), Medium (1000), Large (2000)</td>
            <td>Number of participants in each training batch.</td>
          </tr>
          <tr>
            <td>Cost per Participant</td>
            <td>Continuous (₹100,000 - ₹600,000)</td>
            <td>Financial investment required per trainee.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Inputs Tab -->
    <div id="inputsTab" class="tabcontent">
      <h2>Configure Training Scenario</h2>
      <p>Adjust the parameters below. Then click “Calculate &amp; View Results” to see predicted uptake and cost-benefit analyses.</p>
      <form id="scenario-form">
        <!-- Training Level -->
        <div class="form-group">
          <label>Training Level:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="training-level" value="Frontline" checked>
              Frontline
            </label>
            <label>
              <input type="radio" name="training-level" value="Intermediate">
              Intermediate
            </label>
            <label>
              <input type="radio" name="training-level" value="Advanced">
              Advanced
            </label>
          </div>
        </div>

        <!-- Delivery Method -->
        <div class="form-group">
          <label>Delivery Method:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="delivery-method" value="In-Person" checked>
              In-Person
            </label>
            <label>
              <input type="radio" name="delivery-method" value="Online">
              Online
            </label>
            <label>
              <input type="radio" name="delivery-method" value="Hybrid">
              Hybrid
            </label>
          </div>
        </div>

        <!-- Accreditation -->
        <div class="form-group">
          <label>Accreditation:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="accreditation" value="National" checked>
              National
            </label>
            <label>
              <input type="radio" name="accreditation" value="International">
              International
            </label>
            <label>
              <input type="radio" name="accreditation" value="None">
              None
            </label>
          </div>
        </div>

        <!-- Location of Training -->
        <div class="form-group">
          <label>Location of Training:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="location" value="District-Level" checked>
              District-Level
            </label>
            <label>
              <input type="radio" name="location" value="State-Level">
              State-Level
            </label>
            <label>
              <input type="radio" name="location" value="Regional Centers">
              Regional Centers
            </label>
          </div>
        </div>

        <!-- Cohort Size -->
        <div class="form-group">
          <label for="cohort-size">Cohort Size:</label>
          <input type="range" class="form-control-range" id="cohort-size" min="500" max="2000" step="500" value="1000">
          <small id="cohort-size-value">1000</small>
        </div>

        <!-- Cost per Participant -->
        <div class="form-group">
          <label for="cost-per-participant">Cost per Participant (₹):</label>
          <input type="range" class="form-control-range" id="cost-per-participant" min="100000" max="600000" step="50000" value="300000">
          <small id="cost-per-participant-value">₹300,000</small>
        </div>

        <button type="button" class="btn btn-primary" id="view-results">Calculate &amp; View Results</button>
      </form>
    </div>

    <!-- Predicted Uptake Tab -->
    <div id="uptakeTab" class="tabcontent">
      <h2>Predicted Training Uptake</h2>
      <div id="uptake-content">
        <p>Predicted uptake results appear here.</p>
        <canvas id="uptakeChart" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- Willingness to Pay (WTP) Tab -->
    <div id="wtpTab" class="tabcontent">
      <h2>Willingness to Pay (WTP) Results</h2>
      <p>
        The willingness-to-pay (WTP) for each programme attribute is calculated by comparing its coefficient to the (negative) cost coefficient, reflecting how much respondents value that attribute financially.
      </p>
      <div class="buttons-row">
        <button class="btn btn-success" onclick="renderWTPChart()">Show WTP Plots</button>
      </div>
      <div class="chart-grid">
        <div class="chart-box">
          <h3>WTP (₹) with Error Bars</h3>
          <canvas id="wtpChartMain"></canvas>
        </div>
      </div>
    </div>

    <!-- Costs & Benefits Tab -->
    <div id="cbaTab" class="tabcontent">
      <h2>Costs &amp; Benefits</h2>
      <div id="cba-content">
        <h3>Cost Components</h3>
        <ul>
          <li><strong>Trainer Salaries:</strong> ₹1,200,000</li>
          <li><strong>Venue Hire:</strong> ₹400,000</li>
          <li><strong>Training Materials:</strong> ₹500,000</li>
          <li><strong>Participant Support:</strong> ₹300,000</li>
          <li><strong>Administrative Costs:</strong> ₹250,000</li>
          <li><strong>Technology Infrastructure:</strong> ₹600,000</li>
          <li><strong>Marketing &amp; Recruitment:</strong> ₹350,000</li>
          <li><strong>Opportunity Costs:</strong> ₹800,000</li>
          <li><strong>System Adjustments:</strong> ₹400,000</li>
          <li><strong>Monitoring &amp; Evaluation:</strong> ₹700,000</li>
        </ul>
        <h3>Benefits Measurement</h3>
        <p>
          Benefits are measured in terms of improved public health outcomes. Each participant provides an estimated 0.05 QALYs, reflecting better disease surveillance and outbreak response capacity.
        </p>
        <canvas id="cbaChart" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- Scenarios Tab -->
    <div id="scenariosTab" class="tabcontent">
      <h2>Saved Scenarios</h2>
      <p>
        Save your current scenario from <strong>Inputs</strong> and compare or export multiple configurations, 
        including cost-benefit charts, to PDF.
      </p>
      <form id="save-scenario-form">
        <div class="form-group">
          <label for="scenario-name">Scenario Name:</label>
          <input type="text" class="form-control" id="scenario-name" placeholder="Enter a name for your scenario">
        </div>
        <button type="button" class="btn btn-info" id="save-scenario">Save Scenario</button>
      </form>
      <hr>
      <h4>Saved Scenarios:</h4>
      <ul class="list-group" id="saved-scenarios-list">
        <!-- Saved scenarios will appear here -->
      </ul>
      <hr>
      <button class="btn btn-secondary" id="export-pdf">Export Scenarios to PDF</button>
    </div>

    <footer>
      <p>
        &copy; 2025 STEPS. All Rights Reserved. <br/>
        Author: Mesfin Genie, Newcastle Business School, University of Newcastle, Australia <br/>
        For support, please contact: <a href="mailto:mesfin.genie@newcastle.edu.au">mesfin.genie@newcastle.edu.au</a>
      </p>
    </footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
