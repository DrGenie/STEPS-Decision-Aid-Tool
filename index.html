<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>STEPS Decision Aid Tool</title>
  <link rel="stylesheet" href="styles.css"/>
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>STEPS Decision Aid Tool</h1>
    </header>

    <div class="tabs">
      <button class="tablink active" onclick="openTab('introTab', this)">Introduction</button>
      <button class="tablink" onclick="openTab('instructionsTab', this)">Instructions</button>
      <button class="tablink" onclick="openTab('attributesTab', this)">Attributes</button>
      <button class="tablink" onclick="openTab('inputsTab', this)">Inputs</button>
      <button class="tablink" onclick="openTab('uptakeTab', this)">Predicted Uptake</button>
      <button class="tablink" onclick="openTab('wtpTab', this)">Willingness to Pay</button>
      <button class="tablink" onclick="openTab('cbaTab', this)">Costs & Benefits</button>
      <button class="tablink" onclick="openTab('scenariosTab', this)">Scenarios</button>
    </div>

    <!-- Introduction Tab -->
    <div id="introTab" class="tabcontent" style="display: block;">
      <div class="intro-box">
        <p>
          Scaling Field Epidemiology Training Programs (FETP) in India is crucial for enhancing public health surveillance, outbreak response, and data-driven decision-making. This tool uses an error component logit model to predict uptake probabilities and perform cost-benefit analyses, empowering you to make data-informed decisions on program scaling.
        </p>
        <p>Use the tabs above to navigate:</p>
        <ul>
          <li><strong>Instructions</strong> – Guidance for using the tool.</li>
          <li><strong>Attributes</strong> – Overview of the training attributes considered in the analysis.</li>
          <li><strong>Inputs</strong> – Configure your scenario’s parameters.</li>
          <li><strong>Predicted Uptake</strong> – Check real-time predicted training uptake.</li>
          <li><strong>Willingness to Pay</strong> – Analyze the monetary value of each attribute.</li>
          <li><strong>Costs & Benefits</strong> – View detailed cost and benefit analysis for your configuration.</li>
          <li><strong>Scenarios</strong> – Save multiple scenarios, compare them, or export to PDF.</li>
        </ul>
      </div>
    </div>

    <!-- Instructions Tab -->
    <div id="instructionsTab" class="tabcontent">
      <h2>How to Use This Tool</h2>
      <ol>
        <li>Review <strong>Attributes</strong> to understand available training attributes and levels.</li>
        <li>Visit <strong>Inputs</strong> to configure your scenario using radio buttons and sliders.</li>
        <li>Click <strong>Calculate &amp; View Results</strong> to compute predicted uptake and cost-benefit analysis.</li>
        <li>Check <strong>Predicted Uptake</strong> to see the chart of training uptake.</li>
        <li>Open <strong>Willingness to Pay</strong> to view bar charts with error bars for each attribute.</li>
        <li>Examine <strong>Costs &amp; Benefits</strong> for financial breakdowns and net benefits.</li>
        <li>Use <strong>Scenarios</strong> to save, load, compare, or export your configurations.</li>
      </ol>
    </div>

    <!-- Attributes Tab -->
    <div id="attributesTab" class="tabcontent">
      <h2>Tool Attributes</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Levels</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Training Level</td>
            <td>Frontline, Intermediate, Advanced</td>
            <td>Complexity and depth of the training curriculum.</td>
          </tr>
          <tr>
            <td>Delivery Method</td>
            <td>In-Person, Online, Hybrid</td>
            <td>Mode of instruction and participant engagement.</td>
          </tr>
          <tr>
            <td>Accreditation</td>
            <td>National, International, None</td>
            <td>Formal recognition of program quality.</td>
          </tr>
          <tr>
            <td>Location of Training</td>
            <td>District-Level, State-Level, Regional Centers</td>
            <td>Geographical location where training is conducted.</td>
          </tr>
          <tr>
            <td>Cohort Size</td>
            <td>Small (500), Medium (1000), Large (2000)</td>
            <td>Number of participants per training batch.</td>
          </tr>
          <tr>
            <td>Cost per Participant</td>
            <td>Continuous (₹100,000 - ₹600,000)</td>
            <td>Financial investment required per trainee.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Inputs Tab -->
    <div id="inputsTab" class="tabcontent">
      <h2>Configure Your Training Scenario</h2>
      <form id="scenario-form">
        <!-- Training Level -->
        <div class="form-group">
          <label>Training Level:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="training-level" value="Frontline" checked>
              Frontline
            </label>
            <label>
              <input type="radio" name="training-level" value="Intermediate">
              Intermediate
            </label>
            <label>
              <input type="radio" name="training-level" value="Advanced">
              Advanced
            </label>
          </div>
        </div>

        <!-- Delivery Method -->
        <div class="form-group">
          <label>Delivery Method:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="delivery-method" value="In-Person" checked>
              In-Person
            </label>
            <label>
              <input type="radio" name="delivery-method" value="Online">
              Online
            </label>
            <label>
              <input type="radio" name="delivery-method" value="Hybrid">
              Hybrid
            </label>
          </div>
        </div>

        <!-- Accreditation -->
        <div class="form-group">
          <label>Accreditation:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="accreditation" value="National" checked>
              National
            </label>
            <label>
              <input type="radio" name="accreditation" value="International">
              International
            </label>
            <label>
              <input type="radio" name="accreditation" value="None">
              None
            </label>
          </div>
        </div>

        <!-- Location -->
        <div class="form-group">
          <label>Location of Training:</label>
          <div class="radio-group">
            <label>
              <input type="radio" name="location" value="District-Level" checked>
              District-Level
            </label>
            <label>
              <input type="radio" name="location" value="State-Level">
              State-Level
            </label>
            <label>
              <input type="radio" name="location" value="Regional Centers">
              Regional Centers
            </label>
          </div>
        </div>

        <!-- Cohort Size -->
        <div class="form-group">
          <label for="cohort-size">Cohort Size (500-2000):</label>
          <input 
            type="range" 
            class="form-control-range" 
            id="cohort-size" 
            min="500" 
            max="2000" 
            step="500" 
            value="1000"
          >
          <small id="cohort-size-value">1000</small>
        </div>

        <!-- Cost per Participant -->
        <div class="form-group">
          <label for="cost-per-participant">Cost per Participant (₹100,000–₹600,000):</label>
          <input 
            type="range" 
            class="form-control-range" 
            id="cost-per-participant" 
            min="100000" 
            max="600000" 
            step="50000" 
            value="300000"
          >
          <small id="cost-per-participant-value">₹300,000</small>
        </div>

        <button type="button" class="btn btn-primary" id="view-results">
          Calculate & View Results
        </button>
      </form>
    </div>

    <!-- Predicted Uptake Tab -->
    <div id="uptakeTab" class="tabcontent">
      <h2>Predicted Training Uptake</h2>
      <div id="uptake-content">
        <p>Results will appear here after calculation.</p>
        <canvas id="uptakeChart" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- WTP Tab -->
    <div id="wtpTab" class="tabcontent">
      <h2>Willingness to Pay (WTP)</h2>
      <p>
        The chart below displays how much more (or less) participants are willing to pay for each attribute, 
        relative to a benchmark scenario. Error bars indicate statistical uncertainty (±10%).
      </p>
      <div class="buttons-row">
        <button class="btn btn-success" onclick="renderWTPChart()">Show WTP Plot</button>
      </div>
      <div class="chart-grid">
        <div class="chart-box">
          <canvas id="wtpChartMain"></canvas>
        </div>
      </div>
    </div>

    <!-- Costs & Benefits Tab -->
    <div id="cbaTab" class="tabcontent">
      <h2>Costs & Benefits</h2>
      <div id="cba-content">
        <p>Financial breakdown and net benefits appear here.</p>
        <canvas id="cbaChart" width="400" height="200"></canvas>
      </div>
    </div>

    <!-- Scenarios Tab -->
    <div id="scenariosTab" class="tabcontent">
      <h2>Saved Scenarios</h2>
      <p>
        Save the current scenario, then compare or export multiple configurations to PDF.
      </p>
      <form id="save-scenario-form">
        <div class="form-group">
          <label for="scenario-name">Scenario Name:</label>
          <input 
            type="text" 
            class="form-control" 
            id="scenario-name" 
            placeholder="Enter scenario name"
          >
        </div>
        <button type="button" class="btn btn-info" id="save-scenario">Save Scenario</button>
      </form>
      <hr>
      <h4>Saved Scenarios:</h4>
      <ul class="list-group" id="saved-scenarios-list">
        <!-- Appended items go here -->
      </ul>
      <hr/>
      <button class="btn btn-secondary" id="export-pdf">Export Scenarios to PDF</button>
    </div>

    <footer>
      <p>
        &copy; 2025 STEPS. All Rights Reserved. <br/>
        Author: Mesfin Genie, Newcastle Business School, University of Newcastle, Australia <br/>
        <strong>Support:</strong> <a href="mailto:mesfin.genie@newcastle.edu.au">mesfin.genie@newcastle.edu.au</a>
      </p>
    </footer>
  </div>
  <script src="script.js"></script>
</body>
</html>
